<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>ممشى الهجر - الواقع المعزز</title>
    
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>

    <style>
        body { margin: 0; overflow: hidden; font-family: 'Tajawal', sans-serif; }
        
        /* واجهة البدء */
        #ui-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.95);
            z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center; color: white; text-align: center;
        }

        .map-container {
            width: 85%; height: 200px; background: #334155;
            border-radius: 15px; margin-bottom: 20px; 
            border: 2px solid #22d3ee;
            display: flex; align-items: center; justify-content: center;
        }
        
        h1 { color: #22d3ee; margin-bottom: 10px; font-size: 1.8em; }
        p { color: #cbd5e1; max-width: 80%; line-height: 1.6; }

        #start-btn {
            background: linear-gradient(90deg, #0891b2, #22d3ee);
            border: none; padding: 12px 40px; color: white; font-size: 18px; 
            border-radius: 30px; cursor: pointer; margin-top: 20px;
        }

        .footer { position: absolute; bottom: 20px; width: 100%; color: #94a3b8; font-size: 0.8em; }
        
        /* إخفاء شعار التحميل */
        .arjs-loader { display: none !important; }
    </style>
</head>

<body>

    <div id="ui-overlay">
        <div class="map-container">
            <p>خريطة المسار</p> </div>
        <h1>ممشى الهجر السياحي</h1>
        <p>اكتشف المعلومات الزراعية والمعالم السياحية بتقنية الواقع المعزز أثناء سيرك في الممشى.</p>
        <button id="start-btn" onclick="startExperience()">ابدأ الجولة</button>
        <div class="footer">تعديل وإنشاء : سامي السمري</div>
    </div>

    <a-scene 
        vr-mode-ui="enabled: false"
        arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
        renderer="antialias: true; alpha: true;">

        <a-camera gps-camera rotation-reader far="3000"></a-camera>

        <a-entity gps-entity-place="latitude: 23.28061; longitude: 56.92604;">
            <a-image src="#img-welcome" scale="3 2 1" look-at="[gps-camera]" position="0 2 0"></a-image>
            <a-text value="بداية ممشى الهجر" look-at="[gps-camera]" position="0 0.8 0" align="center" color="#22d3ee" scale="1.5 1.5 1.5"></a-text>
        </a-entity>

        <a-entity gps-entity-place="latitude: 23.28036333; longitude: 56.926905;">
            <a-image src="#img-agri-1" scale="4 3 1" look-at="[gps-camera]" position="0 2.5 0"></a-image>
            <a-sound src="#voice-info-1" autoplay="false" distanceModel="exponential" maxDistance="15"></a-sound>
        </a-entity>

        <a-entity gps-entity-place="latitude: 23.XXXXXX; longitude: 56.XXXXXX;" rotation="0 0 0">
    
    <a-cone 
        color="#00ffcc" 
        radius-bottom="0.5" 
        radius-top="0" 
        height="1.5" 
        position="0 0.1 -1" 
        rotation="90 0 0" 
        material="opacity: 0.9; emissive: #00ffcc; emissiveIntensity: 2">
    </a-cone>

    <a-box 
        color="#00ffcc" 
        width="0.3" 
        height="0.1" 
        depth="1.5" 
        position="0 0.1 0.5" 
        material="opacity: 0.9; emissive: #00ffcc; emissiveIntensity: 2">
    </a-box>

    <a-animation attribute="scale" dur="2000" from="1 1 1" to="1.1 1.1 1.1" direction="alternate" repeat="indefinite"></a-animation>

</a-entity>
        

        <a-entity gps-entity-place="latitude: 23.27963; longitude: 56.92968333;">
            <a-image src="#img-agri-2" scale="4 3 1" look-at="[gps-camera]" position="0 2.5 0"></a-image>
            <a-text value="موسم الحصاد" look-at="[gps-camera]" position="0 4.2 0" align="center" color="#fcd34d" scale="2 2 2"></a-text>
        </a-entity>

        <a-entity gps-entity-place="latitude: 23.27885333; longitude: 56.93137167;">
            <a-image src="#img-landmark" scale="5 3 1" look-at="[gps-camera]" position="0 4 0"></a-image>
        </a-entity>

        <a-entity gps-entity-place="latitude: 23.27842833; longitude: 56.93257;">
             <a-text value="نهاية المسار\nشكراً لزيارتكم" look-at="[gps-camera]" scale="5 5 5" position="0 4 0" color="#4ade80" align="center"></a-text>
        </a-entity>

        <a-assets>
            <img id="img-welcome" src="board_welcome.jpg">   <img id="img-agri-1" src="board_agri_1.jpg">     <img id="img-agri-2" src="board_agri_2.jpg">     <img id="img-landmark" src="board_landmark.jpg"> <audio id="voice-info-1" src="info_voice_1.mp3"></audio>
        </a-assets>

    </a-scene>

    <script>
        function startExperience() {
            document.getElementById('ui-overlay').style.display = 'none';
            
            // تفعيل الأصوات لتعمل عند الاقتراب (بسبب سياسات المتصفح)
            const sounds = document.querySelectorAll('a-sound');
            sounds.forEach(sound => {
                sound.components.sound.playSound();
                sound.components.sound.stopSound(); // إيقاف فوري لتجهيزها للعمل بالمسافة
            });
        }
    </script>
</body>
</html>
